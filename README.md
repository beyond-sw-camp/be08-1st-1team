# íŒŒì¸ë‹¥ (Findoc)

![ì¸íŠ¸ë¡œì´ë¯¸ì§€](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/28796063/ac7970ba-df03-4250-b755-364d25dc31ac)

> [í”Œë ˆì´ ë°ì´í„°] í•œí™”ì‹œìŠ¤í…œ BEYOND SWìº í”„ 8ê¸° / Team Primary
  
|[ë°•ì¤€í˜](https://github.com/monet2155) | [ê¹€ë„í•˜](https://github.com/esueng) | [ê¹€ì€ê²½](https://github.com/kuk329) | [ì´ì§€ì •](https://github.com/leejijung) | [í™©ì§€ìš°](https://github.com/jbr1tr) |
|------------------------------------------|--------------------------------------|------------------------------------------|-----------------------------------|-------------------------------------|

<!-- ê¸°ìˆ  ìŠ¤íƒ (ì•„ì´ì½˜) -->
<img src="https://img.shields.io/badge/mariaDB-003545?style=for-the-badge&logo=mariaDB&logoColor=white">


<!-- ğŸ¬[Demo ì‹œì—°ì˜ìƒ](https://www.youtube.com/watch?v=dhMrKTwNI8U&lc=UgzCJR3WxkvsckRyyO94AaABAg&ab_channel=%EB%94%B0%EB%9D%BC%ED%95%98%EB%A9%B4%EC%84%9C%EB%B0%B0%EC%9A%B0%EB%8A%94IT)   
ğŸ“ƒ[í”„ë¡œì íŠ¸ íšŒê³ ë¡](ë¸”ë¡œê·¸ì£¼ì†Œ)
-->

----------

## âœ¨ í”„ë¡œì íŠ¸ ì„¤ëª…

![í”„ë¡œì íŠ¸_í•„ìš”ì„±](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/28796063/099759b4-0509-4d3e-bd20-49a8f6b8cacb)

- ê°‘ì‘ìŠ¤ëŸ° ì•„í””ì´ë‚˜ ì§ˆë³‘ìœ¼ë¡œ ë³‘ì›ì— ê°€ì•¼ í•  ë•Œ, ì–´ë””ë¡œ ê°€ì•¼ í• ì§€ ë§‰ë§‰í–ˆì£ ?
- íŠ¹íˆ íœ´ì¼ì´ë‚˜ ë°¤ëŠ¦ê²Œ ì•„í”Œ ê²½ìš°, ë”ìš± ì–´ë ¤ì›€ì„ ê²ªìœ¼ì…¨ì„ ê±°ì˜ˆìš”.
- ì–´ë µê²Œ ë³‘ì›ì„ ì°¾ëŠ”ë‹¤ê³  í•´ë„, ì§„ë£Œ ëŒ€ê¸° ì‹œê°„ì´ ê¸¸ì–´ ë‹µë‹µí•˜ì§€ ì•Šìœ¼ì…¨ë‚˜ìš”?

íŒŒì¸ë‹¥ì€ ë°”ë¡œ ì´ëŸ° ë¶ˆí¸í•¨ì„ í•´ê²°í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.

íŒŒì¸ë‹¥ì€ ì§€ê¸ˆ ë‹¹ì¥ ë˜ëŠ” ì›í•˜ëŠ” ë‚ ì§œì— ì´ìš© ê°€ëŠ¥í•œ ë³‘ì›ì„ ì‰½ê²Œ ì°¾ì„ ìˆ˜ ìˆê³ , ì˜ˆì•½í•´ì„œ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  ë°”ë¡œ ì§„ë£Œë¥¼ ë³¼ ìˆ˜ ìˆì–´ìš”.

**íŒŒì¸ë‹¥ê³¼ í•¨ê»˜, ê°‘ì‘ìŠ¤ëŸ° ì•„í””ì—ë„ ë‹¹í™©í•˜ì§€ ì•Šê³  ê±´ê°•í•œ ì‚¶ì„ ìœ„í•œ ì²«ê±¸ìŒì„ ë‚´ë”›ìœ¼ì„¸ìš”!**

----------

## ğŸ§ í”„ë¡œì íŠ¸ ì£¼ìš” ê¸°ëŠ¥
[ìš”êµ¬ì‚¬í•­ ëª…ì„¸](https://docs.google.com/spreadsheets/d/1-901JV0erwZaMJBfVRsbWhYAnOgtMyhiOb7uzIzZk0g/edit#gid=0)

#### ë³‘ì› ì°¾ê¸°
- ì˜ì—… ì‹œê°„, ì ì‹¬ ì‹œê°„ ê¸°ë°˜ ì§€ê¸ˆ ê°ˆ ìˆ˜ ìˆëŠ” ë³‘ì› íƒìƒ‰
- ë³‘ì› ì •ë³´, ì§„ë£Œ ê³¼ëª© ë“± ë‹¤ì–‘í•œ ì¡°ê±´ìœ¼ë¡œ ë³‘ì› ê²€ìƒ‰
#### ë³‘ì› ì˜ˆì•½
- í™˜ì ì •ë³´ì™€ ì¦ìƒì„ ê¸°ì¬í•˜ê³  ì§„ë£Œ ì˜ˆì•½ ì‹ ì²­
- ë³‘ì› ì‹œìŠ¤í…œì—ì„œ ì˜ˆì•½ ê´€ë¦¬(ì˜ˆì•½ í™•ì •, ì·¨ì†Œ ë“±)
#### íšŒì› ê´€ë¦¬
- íšŒì›ê°€ì…, ë¡œê·¸ì¸ ë“± ê¸°ë³¸ì ì¸ íšŒì› ê´€ë¦¬
- ì˜ˆì•½/ì§„ë£Œê¸°ë¡ ì—´ëŒ
- ê¸°ì €ì§ˆí™˜, ë³µìš© ì¤‘ì¸ ì•½ ì„¤ì •
#### ë³´í˜¸ì ëŒ€ë¦¬ ì˜ˆì•½
- ë³´í˜¸ì-í”¼ë³´í˜¸ì ì‹œìŠ¤í…œìœ¼ë¡œ í”¼ë³´í˜¸ìì˜ ì§„ë£Œ ëŒ€ë¦¬ ì˜ˆì•½ ê°€ëŠ¥

## ğŸ’» í”„ë¡œì íŠ¸ êµ¬í˜„
<!-- êµ¬ë™ ì›€ì§¤ -->
### ì£¼ìš” íŠ¹ì§•
<details>
### DB ëª¨ë¸ë§
  <summary> ì ‘ê¸°/í¼ì¹˜ê¸° </summary>
</details>
<details>
### DDL ë° ì£¼ìš” ì¿¼ë¦¬
  <summary> ì ‘ê¸°/í¼ì¹˜ê¸° </summary>
  <details>
    <summary> time_interval</summary>
  </details>
  <details>
    <summary> time_interval</summary>
      <p align="center">
      <img src="https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/96649881/0910f3fc-4b46-4968-b307-1809f2039b99" alt="Description of first image" width="300"/>
      <img src="https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/96649881/ccaed4d3-bcc1-403a-aa5b-266084773362" alt="Description of second image" width="300"/>
    </p>




```
-- ì¼ì£¼ì¼ê°„ì˜ ì‹œê°„ë“¤ ë‹´ì„ í…Œì´ë¸”
CREATE OR REPLACE TABLE time_interval (
    half_hour DATETIME,
    onactive ENUM('active', 'deactive'),
    doctor_no INT,
    FOREIGN KEY (doctor_no) REFERENCES doctor(doctor_no)
);
'''
ê¸ˆì¼ë¶€í„° ì¼ì£¼ì¼ê°„ì˜ ì‹œê°„ë“¤ ìƒì„± í”„ë¡œì‹œì €
(ì˜¤ëŠ˜ ì´ì „ì€ ì‚­ì œ ì˜¤ëŠ˜ë¡œë¶€í„° ì¼ì£¼ì¼ ì¤‘ ì—†ëŠ” ì‹œê°„ì´ ìˆë‹¤ë©´ ìƒì„±,
ì´ë¯¸ í…Œì´ë¸”ì— ìˆëŠ” ì‹œê°„ì— ëŒ€í•´ì„œëŠ” ë³€ë™ì—†ìŒ)
'''

DELIMITER $$

CREATE OR REPLACE PROCEDURE loopwhile()
BEGIN
    DECLARE start_datetime DATETIME;
    DECLARE end_datetime DATETIME;
    DECLARE current_datetime DATETIME;

    -- ì‹œì‘ê³¼ ì¢…ë£Œ ì‹œê°„ ì„¤ì •
    SET start_datetime = DATE(NOW());  -- ì˜¤ëŠ˜ ìì •
    SET end_datetime = DATE_ADD(start_datetime, INTERVAL 7 DAY);  -- ì¼ì£¼ì¼ í›„

    -- ì˜¤ëŠ˜ ì´ì „ì˜ ë°ì´í„° ì‚­ì œ
    DELETE FROM time_interval WHERE half_hour < start_datetime;

    -- ì˜ì‚¬ë³„ ì¼ì£¼ì¼ ê°„ 30ë¶„ ê°„ê²© ë°ì´í„° ì‚½ì…
    WHILE start_datetime < end_datetime DO
        INSERT INTO time_interval (half_hour, onactive, doctor_no)
        SELECT start_datetime, 'deactive', doctor_no
        FROM doctor
        WHERE NOT EXISTS (
            SELECT 1 FROM time_interval
            WHERE half_hour = start_datetime AND doctor_no = doctor.doctor_no
        );

        -- ë‹¤ìŒ 30ë¶„ ê°„ê²© ì„¤ì •
        SET start_datetime = DATE_ADD(start_datetime, INTERVAL 30 MINUTE);
    END WHILE;
END$$

DELIMITER ;

-- ì¼ì£¼ì¼ ì‹œê°„ ì—…ë°ì´íŠ¸ í”„ë¡œì‹œì € ì‹¤í–‰
CALL loopwhile();

-- ê·¼ë¬´ì‹œê°„ í…Œì´ë¸” ìƒì„±
CREATE TABLE worktime (
    doctor_no INT,
    start_worktime DATETIME,
    end_worktime DATETIME,
    FOREIGN KEY (doctor_no) REFERENCES doctor(doctor_no)
);

DELIMITER $$

-- ê·¼ë¬´ì‹œê°„í‘œê°€ ì—…ë°ì´íŠ¸ ë  ë•Œ í•´ë‹¹ ì‚¬ì´ ì‹œê°„ active ë¡œ ë³€ê²½
CREATE TRIGGER activate_time_intervals
AFTER INSERT ON worktime
FOR EACH ROW
BEGIN
    -- time_interval í…Œì´ë¸”ì˜ onactive ìƒíƒœë¥¼ 'active'ë¡œ ì—…ë°ì´íŠ¸
    UPDATE time_interval
    SET onactive = 'active'
    WHERE doctor_no = NEW.doctor_no
      AND half_hour >= NEW.start_worktime
      AND half_hour <= NEW.end_worktime;
END$$

DELIMITER ;

-- íŠ¹ì • ì˜ì‚¬ì˜ íŠ¹ì • ì‹œê°„ì— ëŒ€í•´ì„œ activate í•˜ëŠ” ì¿¼ë¦¬ ( deactiveë„ ë¬¸ì œ ì—†ìŒ )
UPDATE time_interval
SET onactive = 'active'
WHERE doctor_no = 1
  AND half_hour = '2024-05-01 08:00:00';
  
-- worktime í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‚½ì…
INSERT INTO worktime (doctor_no, start_worktime, end_worktime) VALUES
(1, '2024-06-02 08:00:00', '2024-06-02 09:30:00');

-- time_interval í…Œì´ë¸” ì—…ë°ì´íŠ¸ í™•ì¸
SELECT *
FROM time_interval
WHERE doctor_no=1;
```
  </details>
</details>

### í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤
<details>
  <summary> User Table </summary>
  
  | user_id     | user_pwd     | user_name     | user_birthdate | user_addr         | user_phone   | user_disease   | user_medicine  |
|-------------|--------------|---------------|----------------|-------------------|--------------|----------------|----------------|
| john_doe    | password123  | John Doe      | 1985-02-15     | 1234 Broadway St  | 01012345678  | Asthma         | Ventolin       |
| jane_smith  | password123  | Jane Smith    | 1990-08-25     | 2345 Maple Ave    | 01098765432  | Diabetes       | Metformin      |
| susan_lee   | password789  | Susan Lee     | 1975-05-22     | 7890 Elm St       | 0105556677   | Hypertension   | Lisinopril     |
| mike_brown  | mike1234     | Mike Brown    | 1988-11-16     | 4567 Pine St      | 0108765432   | None           | NULL           |
| lisa_ray    | lisa9876     | Lisa Ray      | 1992-03-30     | 321 Oak St        | 0102345678   | Allergies      | Cetirizine     |
| alex_gray   | alexpass     | Alex Gray     | 1983-09-12     | 1579 River Rd     | 0105647382   | None           | NULL           |
| emma_white  | emma1234     | Emma White    | 1995-07-20     | 2020 Sunset Blvd  | 0104321567   | Eczema         | Hydrocortisone |
| noah_wilson | noahpass     | Noah Wilson   | 1980-01-05     | 450 Mountain View | 0109876543   | Anxiety        | Zoloft         |
| olivia_harris | oliviah123 | Olivia Harris | 1992-11-10     | 789 East Dr       | 0106667778   | Asthma         | Ventolin       |
| james_lopez | jamesl456    | James Lopez   | 1979-08-23     | 321 West St       | 0102223334   | Diabetes       | Insulin        |

</details>
<details>
  <summary> Guardian Table</summary>
  
  | guard_no | ward_no | guard_relationship | guard_allowed |
|----------|---------|--------------------|---------------|
| 1        | 2       | Parent             | completed     |
| 2        | 3       | Sibling            | completed     |
| 1        | 4       | Child              | waiting       |
| 4        | 5       | Parent             | completed     |
| 6        | 7       | Spouse             | completed     |
| 8        | 9       | Child              | waiting       |

</details>
<details>
  <summary>Hospital Table</summary>
  
  | hosp_id    | hosp_pwd    | hosp_name                 | hosp_phone |
|------------|-------------|---------------------------|------------|
| bestcare   | hosp1234    | Best Care Medical Center  | 021234567  |
| cityhealth | citypass    | City Health Clinic        | 023456789  |
| medicore   | secure1234  | MediCore Facility         | 024567890  |
| greenmed   | green2023   | Green Medical Services    | 027891011  |
| bluestar   | blue1234    | Blue Star Hospital        | 028765432  |
</details>
## ğŸ‘« CO-OP
### WBS
<details>
  <summary>ì ‘ê¸°/í¼ì¹˜ê¸°
    
  </summary>
  https://docs.google.com/spreadsheets/d/1hpVTMaa_74JfIQDtYtLpZEWX7O0yWWgvPrazUaNrMxc/edit#gid=1835326347
  
  ![wbs](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/96649881/6ed5b4dd-06af-4889-93bd-82d9ee2614ea)

</details>

### íšŒê³ 
