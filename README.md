# íŒŒì¸ë‹¥ (Findoc)

![ì¸íŠ¸ë¡œì´ë¯¸ì§€](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/28796063/ac7970ba-df03-4250-b755-364d25dc31ac)

> [í”Œë ˆì´ ë°ì´í„°] í•œí™”ì‹œìŠ¤í…œ BEYOND SWìº í”„ 8ê¸° / Team Primary
  
|[ë°•ì¤€í˜](https://github.com/monet2155) | [ê¹€ë„í•˜](https://github.com/esueng) | [ê¹€ì€ê²½](https://github.com/kuk329) | [ì´ì§€ì •](https://github.com/leejijung) | [í™©ì§€ìš°](https://github.com/jbr1tr) |
|------------------------------------------|--------------------------------------|------------------------------------------|-----------------------------------|-------------------------------------|

<!-- ê¸°ìˆ  ìŠ¤íƒ (ì•„ì´ì½˜) -->
<img src="https://img.shields.io/badge/mariaDB-003545?style=for-the-badge&logo=mariaDB&logoColor=white">


<!-- ğŸ¬[Demo ì‹œì—°ì˜ìƒ](https://www.youtube.com/watch?v=dhMrKTwNI8U&lc=UgzCJR3WxkvsckRyyO94AaABAg&ab_channel=%EB%94%B0%EB%9D%BC%ED%95%98%EB%A9%B4%EC%84%9C%EB%B0%B0%EC%9A%B0%EB%8A%94IT)   
ğŸ“ƒ[í”„ë¡œì íŠ¸ íšŒê³ ë¡](ë¸”ë¡œê·¸ì£¼ì†Œ)
-->

---

## âœ¨ í”„ë¡œì íŠ¸ ê°œìš”
### 1. í”„ë¡œì íŠ¸ ì†Œê°œ 
íŒŒì¸ë‹¥ì€ ì‚¬ìš©ìë“¤ì´ ë³‘ì›ì„ ì‹ ì†í•˜ê³  í¸ë¦¬í•˜ê²Œ ì°¾ê³  ì˜ˆì•½í•  ìˆ˜ ìˆë„ë¡ ë•ëŠ” `ì¢…í•© ë³‘ì› ì˜ˆì•½ ì‹œìŠ¤í…œ`ì…ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” í˜„ì¬ ìœ„ì¹˜ ë° ì‹œê°„ì— ê¸°ë°˜í•œ ë³‘ì› ê²€ìƒ‰ë¶€í„°, ë‹¤ì–‘í•œ ì¡°ê±´ì„ í™œìš©í•œ ë³‘ì› íƒìƒ‰, ì‹¤ì‹œê°„ ì˜ˆì•½ ë° ê´€ë¦¬ ê¸°ëŠ¥ì„ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. íŒŒì¸ë‹¥ì€ ë³‘ì› ì´ìš©ì˜ ë¶ˆí¸í•¨ì„ ìµœì†Œí™”í•˜ê³ , ë³´ë‹¤ íš¨ìœ¨ì ì¸ ì˜ë£Œ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.
### 2. í”„ë¡œì íŠ¸ í•„ìš”ì„± 
![í”„ë¡œì íŠ¸_í•„ìš”ì„±](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/28796063/099759b4-0509-4d3e-bd20-49a8f6b8cacb)

> - ê°‘ì‘ìŠ¤ëŸ° ì•„í””ì´ë‚˜ ì§ˆë³‘ìœ¼ë¡œ ë³‘ì›ì— ê°€ì•¼ í•  ë•Œ, ì–´ë””ë¡œ ê°€ì•¼ í• ì§€ ë§‰ë§‰í–ˆì£ ?
> - íŠ¹íˆ íœ´ì¼ì´ë‚˜ ë°¤ëŠ¦ê²Œ ì•„í”Œ ê²½ìš°, ë”ìš± ì–´ë ¤ì›€ì„ ê²ªìœ¼ì…¨ì„ ê±°ì˜ˆìš”.
> - ì–´ë µê²Œ ë³‘ì›ì„ ì°¾ëŠ”ë‹¤ê³  í•´ë„, ì§„ë£Œ ëŒ€ê¸° ì‹œê°„ì´ ê¸¸ì–´ ë‹µë‹µí•˜ì§€ ì•Šìœ¼ì…¨ë‚˜ìš”?

íŒŒì¸ë‹¥ì€ ë°”ë¡œ ì´ëŸ° ë¶ˆí¸í•¨ì„ í•´ê²°í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. íŒŒì¸ë‹¥ì„ ì‚¬ìš©í•˜ë©´ ì§€ê¸ˆ ë‹¹ì¥ ë˜ëŠ” ì›í•˜ëŠ” ë‚ ì§œì— ì´ìš© ê°€ëŠ¥í•œ ë³‘ì›ì„ ì‰½ê²Œ ì°¾ì„ ìˆ˜ ìˆê³ , ì˜ˆì•½í•´ì„œ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  ë°”ë¡œ ì§„ë£Œë¥¼ ë³¼ ìˆ˜ ìˆì–´ìš”. íŒŒì¸ë‹¥ê³¼ í•¨ê»˜, ê°‘ì‘ìŠ¤ëŸ° ì•„í””ì—ë„ ë‹¹í™©í•˜ì§€ ì•Šê³  ê±´ê°•í•œ ì‚¶ì„ ìœ„í•œ ì²«ê±¸ìŒì„ ë‚´ë”›ìœ¼ì„¸ìš”!

### 3. í”„ë¡œì íŠ¸ ì£¼ìš” ê¸°ëŠ¥ 
#### 1. ë³‘ì› ì°¾ê¸°
- ì˜ì—… ì‹œê°„, ì ì‹¬ ì‹œê°„ ê¸°ë°˜ ì§€ê¸ˆ ê°ˆ ìˆ˜ ìˆëŠ” ë³‘ì› íƒìƒ‰
- ë³‘ì› ì •ë³´, ì§„ë£Œ ê³¼ëª© ë“± ë‹¤ì–‘í•œ ì¡°ê±´ìœ¼ë¡œ ë³‘ì› ê²€ìƒ‰
#### 2. ë³‘ì› ì˜ˆì•½
- í™˜ì ì •ë³´ì™€ ì¦ìƒì„ ê¸°ì¬í•˜ê³  ì§„ë£Œ ì˜ˆì•½ ì‹ ì²­
- ë³‘ì› ì‹œìŠ¤í…œì—ì„œ ì˜ˆì•½ ê´€ë¦¬(ì˜ˆì•½ í™•ì •, ì·¨ì†Œ ë“±)
#### 3. íšŒì› ê´€ë¦¬
- íšŒì›ê°€ì…, ë¡œê·¸ì¸ ë“± ê¸°ë³¸ì ì¸ íšŒì› ê´€ë¦¬
- ì˜ˆì•½/ì§„ë£Œê¸°ë¡ ì—´ëŒ
- ê¸°ì €ì§ˆí™˜, ë³µìš© ì¤‘ì¸ ì•½ ì„¤ì •
#### 4. ë³´í˜¸ì ëŒ€ë¦¬ ì˜ˆì•½
- ë³´í˜¸ì-í”¼ë³´í˜¸ì ì‹œìŠ¤í…œìœ¼ë¡œ í”¼ë³´í˜¸ìì˜ ì§„ë£Œ ëŒ€ë¦¬ ì˜ˆì•½ ê°€ëŠ¥

---

## ğŸ“Š WBS
[WBS ë°”ë¡œê°€ê¸°](https://docs.google.com/spreadsheets/d/1hpVTMaa_74JfIQDtYtLpZEWX7O0yWWgvPrazUaNrMxc/edit#gid=1835326347)

---

## ğŸ“ ìš”êµ¬ì‚¬í•­ ëª…ì„¸
[ìš”êµ¬ì‚¬í•­ ëª…ì„¸ì„œ ë°”ë¡œê°€ê¸°](https://docs.google.com/spreadsheets/d/1-901JV0erwZaMJBfVRsbWhYAnOgtMyhiOb7uzIzZk0g/edit#gid=0)
![image](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/96649881/492654b2-0f72-496c-994e-8edd8dcbb1f5)

---

## ğŸ—‚ï¸ DB ëª¨ë¸ë§ 
### 1. ê°œë… ëª¨ë¸ë§
![erd_gn](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/96649881/edbb8c5c-306c-4dd6-978a-e0291d34e5a2)
### 2. ë…¼ë¦¬ ëª¨ë¸ë§
![ERD_logical_findoc](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/96649881/2e084a49-68a6-4191-96d7-06a3a5583527)
### 3. ë¬¼ë¦¬ ëª¨ë¸ë§ 
![ERD_physical_findoc](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/96649881/d4f78a01-21e8-408e-8340-bde06e37b678)

---

## ğŸ“ DDL
  <details>
  <summary>DDL</summary>
  <div>
	  
  ```sql	
  #íšŒì› í…Œì´ë¸”
		CREATE TABLE `user` (
			`user_no`	INT AUTO_INCREMENT PRIMARY KEY,											-- ìœ ì € ì‹ë³„ë²ˆí˜¸
			`user_id`	VARCHAR(20)	NOT NULL UNIQUE,										-- ìœ ì € ID
			`user_pwd`	VARCHAR(20)	NOT NULL,											-- ìœ ì € Password
			`user_name`	VARCHAR(20)	NOT NULL,											-- ìœ ì € ì´ë¦„
			`user_birthdate`	DATE NOT NULL,												-- ìœ ì € ìƒë…„ì›”ì¼
			`user_addr`	VARCHAR(50)	NULL,												-- ìœ ì € ì£¼ì†Œ
			`user_phone`	VARCHAR(15)	NOT NULL UNIQUE,										-- ìœ ì € ì „í™”ë²ˆí˜¸
			`user_enrolldate`	DATE	NOT NULL	DEFAULT CURDATE(),								-- ìœ ì € íšŒì›ê°€ì…ì¼
			`user_disease`	VARCHAR(50),													-- ìœ ì € ê¸°ì €ì§ˆí™˜
			`user_medicine`	VARCHAR(50),													-- ìœ ì € ë³µìš©ì¤‘ì¸ ì•½
			`user_secession`	ENUM('activate', 'deactivate', 'suspended')	NOT NULL	DEFAULT 'activate',			-- ìœ ì € íƒˆí‡´ì—¬ë¶€(í™œì„±í™”, ë¹„í™œì„±í™”, ì •ì§€)
			`secession_date`	DATETIME												-- ìœ ì € íƒˆí‡´ë‚ ì§œ
		);
		
		
		#ë³´í˜¸ì/í”¼ë³´í˜¸ì í…Œì´ë¸”
		CREATE TABLE `guardian` (
			`guard_no`	INT	NOT NULL REFERENCES user(`user_no`)								-- ë³´í˜¸ì(ìœ ì € ì‹ë³„ë²ˆí˜¸)
			`ward_no`	INT	NOT NULL REFERENCES user(`user_no`),								-- í”¼ë³´í˜¸ì(ìœ ì € ì‹ë³„ë²ˆí˜¸)
			`guard_relationship`	VARCHAR(20)	NULL,										-- ë³´í˜¸ì/í”¼ë³´í˜¸ì ê´€ê³„
			`guard_allowed`	ENUM('waiting', 'completed', 'rejected')	NOT NULL	DEFAULT 'waiting',			-- ë³´í˜¸ì/í”¼ë³´í˜¸ì ì‹ ì²­ ìƒíƒœ(ëŒ€ê¸°, ì—°ê²°ì™„ë£Œ, ê±°ì ˆ)
			PRIMARY KEY(guard_no, ward_no)
		);
		
		
		# ë³‘ì› í…Œì´ë¸”
		CREATE TABLE `hospital` (
			`hosp_no`	INT AUTO_INCREMENT	PRIMARY KEY,									-- ë³‘ì› ìœ ì € ì‹ë³„ë²ˆí˜¸
			`hosp_id`	VARCHAR(20)	NOT NULL UNIQUE,									-- ë³‘ì› ìœ ì €  ID
			`hosp_pwd`	VARCHAR(20)	NOT NULL,										-- ë³‘ì› ìœ ì € Password
			`hosp_name`	VARCHAR(30)	NOT NULL,										-- ë³‘ì› ì´ë¦„
			`hosp_phone`	VARCHAR(15)	NULL UNIQUE,										-- ë³‘ì› ì „í™”ë²ˆí˜¸
			`hosp_secession` ENUM('activate', 'deactivate', 'suspended') NOT NULL	DEFAULT 'activate',				-- ë³‘ì› ìœ ì € íƒˆí‡´ ì—¬ë¶€(í™œì„±í™”, ë¹„í™œì„±í™”, ì •ì§€)
			`secession_date` DATETIM												-- ë³‘ì› ìœ ì € íƒˆí‡´ë‚ ì§œ
		);
		
		
		# ë³‘ì› ìœ„ì¹˜ì •ë³´ í…Œì´ë¸”
		CREATE TABLE `location` (
		   `loc_no` INT AUTO_INCREMENT PRIMARY KEY,							-- ë³‘ì› ìœ„ì¹˜ì •ë³´ ì‹ë³„ ë²ˆí˜¸
			`loc_addr`	VARCHAR(100)	NOT NULL UNIQUE,					-- ë³‘ì› ì£¼ì†Œ
			`loc_lat`	DOUBLE	NOT NULL,							-- ë³‘ì› ìœ„ë„
			`loc_long`	DOUBLE	NOT NULL,							-- ë³‘ì› ê²½ë„
			`hosp_no`	INT	NOT NULL REFERENCES `hospital`(`hosp_no`)			-- ë³‘ì› ì‹ë³„ ë²ˆí˜¸
		);
		
		
		
		# ë³‘ì› ê³µì§€ì‚¬í•­ í…Œì´ë¸”
		CREATE TABLE `notice` (
		   `notice_no` INT AUTO_INCREMENT PRIMARY KEY,								-- ê³µì§€ì‚¬í•­ ì‹ë³„ ë²ˆí˜¸
			`notice_datetime`	DATETIME	NOT NULL	DEFAULT CURTIME(),			-- ê³µì§€ì‚¬í•­ ì…ë ¥ ë‚ ì§œ
			`notice_body`	VARCHAR(300)	NOT NULL,							-- ê³µì§€ì‚¬í•­ ë‚´ìš©
			`hosp_no`	INT	NOT NULL REFERENCES hospital(`hosp_no`)					-- ë³‘ì› ì‹ë³„ë²ˆí˜¸
		);
		
		
		# ë³‘ì› ì‹œì„¤ í…Œì´ë¸”
		CREATE TABLE `facility` (
		   `facility_no` INT AUTO_INCREMENT PRIMARY KEY,					-- ì‹œì„¤ ì‹ë³„ ë²ˆí˜¸
			`facility_name`	VARCHAR(50)	NOT NULL,					-- ë³‘ì› ì‹œì„¤ ì´ë¦„
			`hosp_no`	INT	NOT NULL REFERENCES hospital(`hosp_no`)			-- ë³‘ì› ì‹ë³„ ë²ˆí˜¸
		);
		
		
		# ë³‘ì› ì¥ë¹„ í…Œì´ë¸”
		CREATE TABLE `equipment` (
		   `equipment_no` INT AUTO_INCREMENT PRIMARY KEY,				-- í…Œì´ë¸” pk
			`equipment_name`	VARCHAR(50)	NOT NULL,			-- ë³‘ì› ì¥ë¹„ ì´ë¦„
			`hosp_no`	INT	NOT NULL REFERENCES hospital(`hosp_no`)		-- ë³‘ì› ì‹ë³„ ë²ˆí˜¸
		);
		
		
		# ì˜ì‚¬ ì§„ë£Œê³¼ëª© ëª©ë¡ í…Œì´ë¸”
		CREATE TABLE `department` (
			`dept_id`	VARCHAR(10)	PRIMARY KEY,		-- ì§„ë£Œê³¼ ID
			`dept_name`	VARCHAR(30)	NOT NULL		-- ì§„ë£Œê³¼ ì´ë¦„
		);
		
		
		# ì˜ì‚¬ í…Œì´ë¸”
		CREATE TABLE `doctor` (
		    `doctor_no`    INT AUTO_INCREMENT PRIMARY KEY,				-- ì˜ì‚¬ ì‹ë³„ ë²ˆí˜¸
		    `hosp_no`    INT    NOT NULL REFERENCES `hospital`(`hosp_no`),		-- ë³‘ì› ì‹ë³„ ë²ˆí˜¸
		    `doctor_name` VARCHAR(40) NOT NULL,						-- ì˜ì‚¬ ì´ë¦„
		    `doctor_gender` ENUM('F', 'M') NULL						-- ì˜ì‚¬ ì„±ë³„
		);
		
		
		# ì˜ì‚¬ì˜ ì§„ë£Œê³¼ëª©, ì§„ë£Œì‹¤ í…Œì´ë¸”
		CREATE TABLE `doctor_dept` (
			`docdept_no`	INT	AUTO_INCREMENT	PRIMARY KEY,					-- ì˜ì‚¬_ì§„ë£Œê³¼ ì‹ë³„ ë²ˆí˜¸
			`doctor_no`	INT	NOT NULL REFERENCES doctor(`doctor_no`),			-- ì˜ì‚¬ ì‹ë³„ë²ˆí˜¸
			`dept_id`	VARCHAR(10)	NOT NULL	REFERENCES department(`dept_id`),	-- ì§„ë£Œê³¼ëª© ID
			`docdept_room` VARCHAR(20)								-- ì˜ì‚¬ ì§„ë£Œì‹¤ëª…
		);
		
		# ì˜ì‚¬ ì§„ë£Œì‹œê°„ í…Œì´ë¸”
		CREATE TABLE `worktime` (
		   `worktime_no` INT AUTO_INCREMENT PRIMARY KEY,					-- í…Œì´ë¸” pk
			`worktime_start`	DATETIME	NOT NULL,				-- ì˜ì‚¬ ì§„ë£Œ ì‹œì‘ ì‹œê°„
			`worktime_end`	DATETIME	NOT NULL,					-- ì˜ì‚¬ ì§„ë£Œ ì¢…ë£Œ ì‹œê°„
			`doctor_no`	INT	NOT NULL REFERENCES doctor(`doctor_no`)			-- ì˜ì‚¬ ì‹ë³„ ë²ˆí˜¸
		);
		
		
		# ì˜ˆì•½ í…Œì´ë¸”
		CREATE TABLE `appointment` (
			`appt_no`	INT AUTO_INCREMENT	PRIMARY KEY,								-- ì˜ˆì•½ ì‹ë³„ ë²ˆí˜¸
			`appt_date`	DATETIME	NOT NULL,									-- ì˜ˆì•½ ë‚ ì§œì‹œê°„
			`appt_status`	ENUM('waiting', 'accepted', 'rejected', 'complete')	NOT NULL	DEFAULT 'waiting',	-- ì˜ˆì•½ ìƒíƒœ(ëŒ€ê¸°, ìŠ¹ì¸, ê±°ì ˆ, ì§„ë£Œì™„ë£Œ)
			`appt_symptom`	VARCHAR(50)	NULL,										-- ì˜ˆì•½ ì¦ìƒ
			`user_no`	INT	NOT NULL REFERENCES `user`(`user_no`),							-- ìœ ì € ì‹ë³„ ë²ˆí˜¸
			`hosp_no`	INT	NOT NULL REFERENCES hospital(`hosp_no`),						-- ë³‘ì› ì‹ë³„ ë²ˆí˜¸
			`doctor_no`	INT	NOT NULL REFERENCES doctor(`doctor_no`),						-- ì˜ì‚¬ ì‹ë³„ ë²ˆí˜¸
			`guard_ID` VARCHAR(20),												-- ë³´í˜¸ì ID
			`ward_ID` VARCHAR(20)												-- í”¼ë³´í˜¸ì ID
		);
		
		
		# ì§„ë£Œê¸°ë¡ í…Œì´ë¸”
		CREATE TABLE `medical_record` (
			`record_no`	INT	AUTO_INCREMENT PRIMARY KEY,								-- ì§„ë£Œê¸°ë¡ ì‹ë³„ ë²ˆí˜¸
			`record_diagnosis`	VARCHAR(100)	NULL,									-- ì§„ë£Œ ì§„ë‹¨ ë‚´ìš©
			`record_treatment`	VARCHAR(100)	NULL,									-- ì§„ë£Œ ì¹˜ë£Œ ë‚´ìš©
			`appt_no`	INT	NOT NULL UNIQUE REFERENCES `appointment`(`appt_no`)					-- ì˜ˆì•½ ì‹ë³„ ë²ˆí˜¸
		);
		
		
		
		# ê±°ì ˆ ì‚¬ìœ  í…Œì´ë¸”
		CREATE TABLE `rejection`(
		   `rejection_no` INT	AUTO_INCREMENT PRIMARY KEY,		            	-- ê±°ì ˆ ì‚¬ìœ  ì‹ë³„ ë²ˆí˜¸
			`rejection_result` VARCHAR(100) NOT NULL,				-- ê±°ì ˆ ì´ìœ 
			`appt_no` INT NOT NULL REFERENCES `appointment`(`appt_no`)		-- ì˜ˆì•½ ì‹ë³„ ë²ˆí˜¸
		);
		
		
		# ì˜ì‚¬ ìŠ¤ì¼€ì¤„  í…Œì´ë¸”
		CREATE TABLE schedule(
			schedule_no INT AUTO_INCREMENT PRIMARY KEY,				-- ìŠ¤ì¼€ì¤„ ì‹ë³„ ë²ˆí˜¸
		   schedule_time DATETIME NOT NULL,						-- ìŠ¤ì¼€ì¤„ ì‹œê°„ëª©ë¡
		   schedule_onactive ENUM('active', 'deactive') NOT NULL DEFAULT 'active',	-- ì˜ˆì•½ ê°€ëŠ¥ì—¬ë¶€
		   doctor_no INT NOT NULL REFERENCES doctor(doctor_no)				-- ì˜ì‚¬ ì‹ë³„ë²ˆí˜¸
		);
		
		
		# ë³‘ì› ì ì‹¬ì‹œê°„ í…Œì´ë¸”
		CREATE TABLE launch(
			launch_no INT AUTO_INCREMENT PRIMARY KEY,				-- ì ì‹¬ì‹œê°„ ì‹ë³„ ë²ˆí˜¸
		   launch_start TIME NOT NULL,							-- ì ì‹¬ ì‹œì‘ ì‹œê°„
		   launch_end TIME NOT NULL,							-- ì ì‹¬ ì •ë£Œì‹œê°„
		   hosp_no INT NOT NULL REFERENCES hospital(hosp_no)				-- ë³‘ì› ì‹ë³„ë²ˆí˜¸
		);
  ```
  </div>
  </details>

---

## ğŸ“ƒ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤
### 1. í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ë¬¸ì„œ
[í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ ë¬¸ì„œ ë°”ë¡œê°€ê¸°](https://docs.google.com/spreadsheets/d/1DoapmkEKpczNL8F6J-lcrC_b0urFBHJlQDxQQlvPRBc/edit#gid=0)

![image](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/63641939/822f16ce-7bf4-4703-8579-3cbb70888abc)
![image](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/63641939/e7fe6906-238e-4061-98b6-f0914f2883c6)
![image](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/63641939/1602fca4-aeba-4111-a2ca-6420aafb5a7f)
![image](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/63641939/081b978d-a87e-4f7a-89bd-b953d3ef19ff)
![image](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/63641939/bfbd0636-1f8b-4bcb-b769-5b74241fe35b)


### 2. í…ŒìŠ¤íŠ¸ ë°ì´í„°
<details>
  <summary> User Table </summary>
  
  | user_id     | user_pwd     | user_name     | user_birthdate | user_addr         | user_phone   | user_disease   | user_medicine  |
|-------------|--------------|---------------|----------------|-------------------|--------------|----------------|----------------|
| john_doe    | password123  | John Doe      | 1985-02-15     | 1234 Broadway St  | 01012345678  | Asthma         | Ventolin       |
| jane_smith  | password123  | Jane Smith    | 1990-08-25     | 2345 Maple Ave    | 01098765432  | Diabetes       | Metformin      |
| susan_lee   | password789  | Susan Lee     | 1975-05-22     | 7890 Elm St       | 0105556677   | Hypertension   | Lisinopril     |
| mike_brown  | mike1234     | Mike Brown    | 1988-11-16     | 4567 Pine St      | 0108765432   | None           | NULL           |
| lisa_ray    | lisa9876     | Lisa Ray      | 1992-03-30     | 321 Oak St        | 0102345678   | Allergies      | Cetirizine     |
| alex_gray   | alexpass     | Alex Gray     | 1983-09-12     | 1579 River Rd     | 0105647382   | None           | NULL           |
| emma_white  | emma1234     | Emma White    | 1995-07-20     | 2020 Sunset Blvd  | 0104321567   | Eczema         | Hydrocortisone |
| noah_wilson | noahpass     | Noah Wilson   | 1980-01-05     | 450 Mountain View | 0109876543   | Anxiety        | Zoloft         |
| olivia_harris | oliviah123 | Olivia Harris | 1992-11-10     | 789 East Dr       | 0106667778   | Asthma         | Ventolin       |
| james_lopez | jamesl456    | James Lopez   | 1979-08-23     | 321 West St       | 0102223334   | Diabetes       | Insulin        |

</details>
<details>
  <summary> Guardian Table</summary>
  
  | guard_no | ward_no | guard_relationship | guard_allowed |
|----------|---------|--------------------|---------------|
| 1        | 2       | Parent             | completed     |
| 2        | 3       | Sibling            | completed     |
| 1        | 4       | Child              | waiting       |
| 4        | 5       | Parent             | completed     |
| 6        | 7       | Spouse             | completed     |
| 8        | 9       | Child              | waiting       |

</details>
<details>
  <summary>Hospital Table</summary>
  
  | hosp_id    | hosp_pwd    | hosp_name                 | hosp_phone |
|------------|-------------|---------------------------|------------|
| bestcare   | hosp1234    | Best Care Medical Center  | 021234567  |
| cityhealth | citypass    | City Health Clinic        | 023456789  |
| medicore   | secure1234  | MediCore Facility         | 024567890  |
| greenmed   | green2023   | Green Medical Services    | 027891011  |
| bluestar   | blue1234    | Blue Star Hospital        | 028765432  |
</details>

<details>
  <summary> Location Table </summary>

  | loc_addr            | loc_lat | loc_long  | hosp_no |
|---------------------|---------|-----------|---------|
| 6789 Hospital Rd    | 37.7749 | -122.4194 | 1       |
| 123 Health Blvd     | 40.7128 | -74.0060  | 2       |
| 456 Clinic Rd       | 34.0522 | -118.2437 | 3       |
| 500 Clinic Center Dr| 39.9042 | -75.1698  | 4       |
| 1200 Health Park    | 33.6844 | -117.8265 | 5       |

</details>

<details>
  <summary> Notice Table</summary>

  | notice_datetime | notice_body                        | hosp_no |
|-----------------|------------------------------------|---------|
| NOW()           | Please wear a mask.                | 1       |
| NOW()           | Flu shots available.               | 2       |
| NOW()           | New COVID-19 guidelines updated.   | 3       |
| NOW()           | Annual health checkup discount event.| 4    |
| NOW()           | COVID-19 vaccination available.    | 5       |

</details>

<details>
  <summary>Facility Table</summary>

  | facility_name       | hosp_no |
|---------------------|---------|
| Emergency Room      | 1       |
| Intensive Care Unit | 2       |
| Pediatrics Wing     | 3       |
| Maternity Ward      | 4       |
| Oncology Center     | 5       |

  
</details>

<details>
  <summary>Equipment Table</summary>
  
  | equipment_name | hosp_no |
|----------------|---------|
| MRI Scanner    | 1       |
| Ultrasound     | 2       |
| X-Ray Machine  | 3       |
| CT Scanner     | 4       |
| ECG Machine    | 5       |

</details>
<details>
  <summary>Department Table</summary>

  | dept_id | dept_name   |
|---------|-------------|
| cardio  | Cardiology  |
| gynae   | Gynecology  |
| ortho   | Orthopedics |

</details>
<details>
  <summary>Doctor Table</summary>

  | hosp_no | doctor_name       | doctor_gender |
|---------|-------------------|---------------|
| 1       | Dr. Alice Johnson | F             |
| 2       | Dr. Emily White   | F             |
| 3       | Dr. Robert Green  | M             |
| 4       | Dr. Charlotte Johnson | F         |
| 5       | Dr. Henry Martinez| M             |

</details>
<details>
  <summary>Doctor Departmentw Table</summary>

  | doctor_no | dept_id | docdept_room |
|-----------|---------|--------------|
| 1         | cardio  | 101A         |
| 2         | gynae   | 202B         |
| 3         | ortho   | 303C         |
| 4         | gynae   | 403D         |
| 5         | ortho   | 505E         |

</details>
<details>
  <summary>Worktime Table</summary>  

  | worktime_start       | worktime_end         | doctor_no |
|----------------------|----------------------|-----------|
| 2023-01-01 08:00:00  | 2023-01-01 16:00:00  | 1         |
| 2023-01-02 09:00:00  | 2023-01-02 17:00:00  | 2         |
| 2023-01-03 10:00:00  | 2023-01-03 18:00:00  | 3         |
| 2023-01-04 08:00:00  | 2023-01-04 14:00:00  | 4         |
| 2023-01-05 12:00:00  | 2023-01-05 18:00:00  | 5         |

</details>
<details>
  <summary>Appointment Table</summary>

  | appt_date            | appt_symptom      | user_no | hosp_no | doctor_no |
|----------------------|-------------------|---------|---------|-----------|
| 2023-12-15 10:00:00  | Cough and fever   | 1       | 1       | 1         |
| 2023-12-20 11:00:00  | Headache          | 2       | 2       | 2         |
| 2023-12-21 12:00:00  | Broken leg        | 3       | 3       | 3         |
| 2023-12-22 14:00:00  | Regular checkup   | 4       | 4       | 4         |
| 2023-12-23 15:00:00  | Chemotherapy session | 5   | 5       | 5         |

</details>
<details>
  <summary>Medical Record Table</summary>

  | record_diagnosis | record_treatment    | appt_no |
|------------------|---------------------|---------|
| Flu              | Rest and medication | 1       |
| Migraine         | Prescribed pain relief | 2     |
| Leg fracture     | Surgery required    | 3       |
| General checkup  | All clear           | 4       |
| Cancer treatment | Chemotherapy        | 5       |

</details>
<details>
  <summary>Rejection Table</summary>

  | rejection_result                  | appt_no |
|-----------------------------------|---------|
| Doctor unavailable on requested date | 1     |
| Unavailable for requested time    | 2       |
| Doctor on leave                   | 3       |

</details>

---

## ğŸ”‘ ì£¼ìš” ì¿¼ë¦¬


  ### 1. íšŒì›
  <details>
  <summary>íšŒì› ê°€ì…</summary>
  <div>

  ```sql
  INSERT INTO user(user_id, user_pwd, user_name, user_birthdate, user_addr, user_phone)
  VALUE('user11', 'password11', 'ì´ì¥ì„ ', '1996-06-03', 'ê²½ê¸°ë„ê¹€í¬ì‹œ ì¥ê¸°ë™ 123-43', '01099487826');

  ```
![image](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/80452437/dba7ccd2-5015-46b3-bc24-bcead2f37d82)
  </div>
  </details>
  <details>
  <summary>íšŒì› íƒˆí‡´</summary>
  <div>

  ```sql
  UPDATE user
  SET user_secession = 'deactivate',
      secession_date = NOW()
  WHERE user_no = 11;
  ```
![image](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/80452437/92adac65-f0ae-424e-8a71-06693978dc94)

  </div>
  </details>
  
  ### 2. ë³‘ì› 
  <details>
  <summary>ë³‘ì› ê°€ì…</summary>
  <div>

  ```sql
  INSERT INTO hospital(hosp_id, hosp_pwd, hosp_name, hosp_phone)
  VALUES('hosp11', 'password11', 'ë°”ë¥¸ ë³‘ì›', '01011223345');
  ```
![image](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/80452437/28ad5a2f-1bfd-4c89-9efd-e37f323ed6e6)

  </div>
  </details>
  <details>
  <summary>ë³‘ì› íƒˆí‡´</summary>
  <div>

  ```sql
  UPDATE hospital
  SET hosp_secession = 'deactivate',
      secession_date = NOW()
  WHERE hosp_no = 11;
  ```
![image](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/80452437/a632201b-40dc-454e-bc01-8a59087bb7ae)

  </div>
  </details>

  <details>
  <summary> ì˜ì‚¬ ìŠ¤ì¼€ì¤„ </summary>
  <div>
      <p align="center">
      <img src="https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/96649881/0910f3fc-4b46-4968-b307-1809f2039b99" alt="Description of first image" width="300"/>
      <img src="https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/96649881/ccaed4d3-bcc1-403a-aa5b-266084773362" alt="Description of second image" width="300"/>
    </p>

 
	-- ì¼ì£¼ì¼ê°„ì˜ ì‹œê°„ë“¤ ë‹´ì„ í…Œì´ë¸”
	CREATE OR REPLACE TABLE time_interval (
	    half_hour DATETIME,
	    onactive ENUM('active', 'deactive'),
	    doctor_no INT,
	    FOREIGN KEY (doctor_no) REFERENCES doctor(doctor_no)
	);
	'''
	ê¸ˆì¼ë¶€í„° ì¼ì£¼ì¼ê°„ì˜ ì‹œê°„ë“¤ ìƒì„± í”„ë¡œì‹œì €
	(ì˜¤ëŠ˜ ì´ì „ì€ ì‚­ì œ ì˜¤ëŠ˜ë¡œë¶€í„° ì¼ì£¼ì¼ ì¤‘ ì—†ëŠ” ì‹œê°„ì´ ìˆë‹¤ë©´ ìƒì„±,
	ì´ë¯¸ í…Œì´ë¸”ì— ìˆëŠ” ì‹œê°„ì— ëŒ€í•´ì„œëŠ” ë³€ë™ì—†ìŒ)
	'''
	https://github.com/beyond-sw-camp/be08-1st-primary-findoc/blob/main/README.md
	DELIMITER $$
	
	CREATE OR REPLACE PROCEDURE loopwhile()
	BEGIN
	    DECLARE start_datetime DATETIME;
	    DECLARE end_datetime DATETIME;
	    DECLARE current_datetime DATETIME;
	
	    -- ì‹œì‘ê³¼ ì¢…ë£Œ ì‹œê°„ ì„¤ì •
	    SET start_datetime = DATE(NOW());  -- ì˜¤ëŠ˜ ìì •
	    SET end_datetime = DATE_ADD(start_datetime, INTERVAL 7 DAY);  -- ì¼ì£¼ì¼ í›„
	
	    -- ì˜¤ëŠ˜ ì´ì „ì˜ ë°ì´í„° ì‚­ì œ
	    DELETE FROM time_interval WHERE half_hour < start_datetime;
	
	    -- ì˜ì‚¬ë³„ ì¼ì£¼ì¼ ê°„ 30ë¶„ ê°„ê²© ë°ì´í„° ì‚½ì…
	    WHILE start_datetime < end_datetime DO
	        INSERT INTO time_interval (half_hour, onactive, doctor_no)
	        SELECT start_datetime, 'deactive', doctor_no
	        FROM doctor
	        WHERE NOT EXISTS (
	            SELECT 1 FROM time_interval
	            WHERE half_hour = start_datetime AND doctor_no = doctor.doctor_no
	        );
	
	        -- ë‹¤ìŒ 30ë¶„ ê°„ê²© ì„¤ì •
	        SET start_datetime = DATE_ADD(start_datetime, INTERVAL 30 MINUTE);
	    END WHILE;
	END$$
	
	DELIMITER ;
	
	-- ì¼ì£¼ì¼ ì‹œê°„ ì—…ë°ì´íŠ¸ í”„ë¡œì‹œì € ì‹¤í–‰
	CALL loopwhile();
	
	-- ê·¼ë¬´ì‹œê°„ í…Œì´ë¸” ìƒì„±
	CREATE TABLE worktime (
	    doctor_no INT,
	    start_worktime DATETIME,
	    end_worktime DATETIME,
	    FOREIGN KEY (doctor_no) REFERENCES doctor(doctor_no)
	);
	
	DELIMITER $$
	
	-- ê·¼ë¬´ì‹œê°„í‘œê°€ ì—…ë°ì´íŠ¸ ë  ë•Œ í•´ë‹¹ ì‚¬ì´ ì‹œê°„ active ë¡œ ë³€ê²½
	CREATE TRIGGER activate_time_intervals
	AFTER INSERT ON worktime
	FOR EACH ROW
	BEGIN
	    -- time_interval í…Œì´ë¸”ì˜ onactive ìƒíƒœë¥¼ 'active'ë¡œ ì—…ë°ì´íŠ¸
	    UPDATE time_interval
	    SET onactive = 'active'
	    WHERE doctor_no = NEW.doctor_no
	      AND half_hour >= NEW.start_worktime
	      AND half_hour <= NEW.end_worktime;
	END$$
	
	DELIMITER ;
	
	-- íŠ¹ì • ì˜ì‚¬ì˜ íŠ¹ì • ì‹œê°„ì— ëŒ€í•´ì„œ activate í•˜ëŠ” ì¿¼ë¦¬ ( deactiveë„ ë¬¸ì œ ì—†ìŒ )
	UPDATE time_interval
	SET onactive = 'active'
	WHERE doctor_no = 1
	  AND half_hour = '2024-05-01 08:00:00';
	  
	-- worktime í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‚½ì…
	INSERT INTO worktime (doctor_no, start_worktime, end_worktime) VALUES
	(1, '2024-06-02 08:00:00', '2024-06-02 09:30:00');
	
	-- time_interval í…Œì´ë¸” ì—…ë°ì´íŠ¸ í™•ì¸
	SELECT *
	FROM time_interval
	WHERE doctor_no=1;


  </div>
  </details>

  ### 3. ë³‘ì› ê²€ìƒ‰ 
  <details>
  <summary>í•„í„° ê¸°ë°˜ ë³‘ì› ê²€ìƒ‰</summary>
  <div>
   
  * ìˆ˜ìˆ ì‹¤, MRIê°€ ìˆëŠ” ì™¸ê³¼ ê²€ìƒ‰
  ```sql

  SELECT h.hosp_name AS "ë³‘ì›ëª…",
        w.worktime_start AS "ì§„ë£Œ ì‹œì‘ ì‹œê°„",
        w.worktime_end AS "ì§„ë£Œ ì¢…ë£Œ ì‹œê°„",
        dept.dept_name AS "ì§„ë£Œ ê³¼ëª©"
  FROM hospital h
  JOIN facility f ON h.hosp_no = f.hosp_no
  JOIN equipment e ON h.hosp_no = e.hosp_no
  JOIN doctor doc ON h.hosp_no = doc.hosp_no
  JOIN doctor_dept dd ON doc.doctor_no = dd.doctor_no
  JOIN department dept ON dd.dept_id = dept.dept_id
  JOIN location l ON h.hosp_no = l.hosp_no
  JOIN worktime w ON doc.doctor_no = w.doctor_no
  WHERE f.facility_name = "ìˆ˜ìˆ ì‹¤" AND e.equipment_name = "MRI" AND dept.dept_name = "ì™¸ê³¼";
  ```
![image](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/63641939/51b6fe1e-1914-44cd-87d3-54e74e7d59a8)
  </div>
  </details>

  ### 4. ë³‘ì› ì˜ˆì•½ 
  <details>
  <summary>í™˜ì ë³¸ì¸ ì§„ë£Œ ì˜ˆì•½</summary>
  <div>
   
  * í•´ë‹¹ ì˜ˆì•½ ì‹œê°„ì— ì„ íƒí•œ ë‹´ë‹¹ì˜ê°€ activeì´ë©´ ì˜ˆì•½ ê°€ëŠ¥ 

  ```sql

  INSERT INTO appointment (appt_date, appt_symptom, user_no, hosp_no, doctor_no)
  SELECT '2024-06-02 08:30:00', 'ë³µí†µ', 6, 1, 1
  WHERE EXISTS (
    SELECT 1 
    FROM time_interval 
    WHERE half_hour = '2024-06-02 08:30:00'
      AND doctor_no = 1
      AND onactive = 'active'
  ) AND EXISTS (SELECT 1 FROM doctor WHERE hosp_no=1 AND doctor_no=1);
  ```
![image](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/63641939/45ceab65-5430-4d9c-b5ef-bbdcfcdae6e5)
  </div>
  </details>
  <details>
  <summary>ë³´í˜¸ìê°€ í”¼ë³´í˜¸ìì˜ ì§„ë£Œ ì˜ˆì•½</summary>
  <div>
   
  * í•´ë‹¹ ì˜ˆì•½ ì‹œê°„ì— ì„ íƒí•œ ë‹´ë‹¹ì˜ê°€ activeì´ê³ , ë³´í˜¸ì ê´€ê³„ê°€ ì„±ë¦½í•˜ë©´ ì˜ˆì•½ ê°€ëŠ¥ 

  ```sql

  DELIMITER //

  CREATE PROCEDURE AddAppointmentByGuardian (
      IN in_guard_no INT,
      IN in_ward_no INT,
      IN appt_date DATETIME,
      IN appt_symptom VARCHAR(50),
      IN hosp_no INT,
      IN doctor_no INT,
      IN guard_ID VARCHAR(20),
      IN ward_ID VARCHAR(20)
  )
  BEGIN
      DECLARE guard_exist INT;
      DECLARE doctor_time INT;

      -- ë³´í˜¸ìì™€ í”¼ë³´í˜¸ì ê´€ê³„ í™•ì¸
      SELECT COUNT(*) INTO guard_exist
      FROM `guardian`
      WHERE `guard_no` = in_guard_no
        AND `ward_no` = in_ward_no;

      -- ì˜ì‚¬ì˜ í™œì„±í™”ëœ ì‹œê°„ í™•ì¸
      SELECT COUNT(*) INTO doctor_time
      FROM time_interval 
      WHERE half_hour = appt_date
        AND doctor_no = doctor_no
        AND onactive = 'active';

      IF guard_exist > 0 AND doctor_time > 0 THEN
          -- í”¼ë³´í˜¸ìë¥¼ ëŒ€ì‹ í•˜ì—¬ ì˜ˆì•½ ì‹ ì²­
          INSERT INTO `appointment` 
          (appt_date, appt_status, appt_symptom, user_no, hosp_no, doctor_no, guard_ID, ward_ID)
          VALUES
          (appt_date, 'waiting', appt_symptom, in_ward_no, hosp_no, doctor_no, guard_ID, ward_ID);
      ELSEIF doctor_time = 0 THEN
          SIGNAL SQLSTATE '45000'
          SET MESSAGE_TEXT = 'Deactive time';
      ELSEIF guard_exist = 0 THEN 
          SIGNAL SQLSTATE '45000'
          SET MESSAGE_TEXT = 'Invalid guardian or ward relationship.';
      END IF;
  END //

  DELIMITER ;

  -- CALL ì˜ˆì‹œ 
  CALL AddAppointmentByGuardian(6, 1, '2024-06-02 08:30:00', 'ê³ í˜ˆì•• ì¦ìƒ', 1, 1, 'user06', 'user01');
  ```
![image](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/63641939/44601597-23e3-473c-ad1f-c0c7016179e0)
  </div>
  </details>
  <details>
  <summary>ë³‘ì›ì´ ì§„ë£Œ ì˜ˆì•½ í™•ì¸</summary>
  <div>
   
  * ë³‘ì› IDë¥¼ í†µí•´ ì˜ˆì•½ ë‚´ì—­ í™•ì¸ 
  ```sql

  SELECT h.hosp_name AS "ë³‘ì›ëª…",
	    a.appt_date AS "ì˜ˆì•½ì¼ì‹œ",
	    u.user_name AS "í™˜ìëª…",
	    a.appt_symptom AS "ì¦ìƒ",
	    u.user_phone AS "í™˜ì ì „í™”ë²ˆí˜¸",
	    u.user_disease AS "ê¸°ì €ì§ˆí™˜",
	    a.appt_status AS "ì˜ˆì•½ìƒíƒœ" 
  FROM hospital h
  JOIN appointment a ON h.hosp_no = a.hosp_no
  JOIN user u ON u.user_no = a.user_no
  WHERE h.hosp_id = 'hosp03';
  ```
![image](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/63641939/aa23006f-8840-4522-8495-1c0f56575784)
  </div>
  </details>

  ### 5. ì˜ˆì•½ ì·¨ì†Œ 
  <details>
  <summary>í™˜ì ë³¸ì¸ ì§„ë£Œ ì˜ˆì•½ ì·¨ì†Œ</summary>
  <div>
   
  * ì˜ˆì•½ ë²ˆí˜¸, íšŒì› ì•„ì´ë””, ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ë©´ ì˜ˆì•½ ì·¨ì†Œ í—ˆìš©
  ```sql

  DELETE FROM `appointment`
  WHERE `appt_no` = 7
    AND `appt_status` = 'waiting' OR `appt_status` = 'accepted'
    AND `user_no` = (SELECT `user_no` 
                    FROM `user` 
                    WHERE `user_name` = 'ë°•ë¯¼í˜•' 
                      AND `user_id` = 'user03' 
                      AND `user_pwd` = 'password3');
  SELECT * FROM appointment;
  ```
![image](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/63641939/5985d2fc-14a1-4d29-99b2-689f0a1f3f26)
![image](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/63641939/cc285ea9-61dc-49e8-89f1-c8861484ee86)
  </div>
  </details>
  <details>
  <summary>ë³´í˜¸ìê°€ í”¼ë³´í˜¸ìì˜ ì§„ë£Œ ì˜ˆì•½ ì·¨ì†Œ</summary>
  <div>
  
  * ë³´í˜¸ì ì•„ì´ë””, ë³´í˜¸ì ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥ë°›ê³  í•´ë‹¹ ì˜ˆì•½ ë‚´ì—­ì— ëŒ€í•´ ë³´í˜¸ì ê´€ê³„ê°€ ì„±ë¦½í•˜ë©´ ì˜ˆì•½ ì·¨ì†Œ í—ˆìš©
  ```sql

  DELIMITER //

  CREATE PROCEDURE CancelAppointmentByGuardian (
      IN guard_no INT,
      IN guard_id VARCHAR(50),
      IN guard_password VARCHAR(50),
      IN ward_no INT,
      IN appt_no INT
  )
  BEGIN
      DECLARE guard_exist INT;
      DECLARE appointment_exist INT;

      -- ë³´í˜¸ì ìê²© ë° IDì™€ ë¹„ë°€ë²ˆí˜¸ í™•ì¸
      SELECT COUNT(*) INTO guard_exist
      FROM `guardian` g
      JOIN `user` u ON g.guard_no = u.user_no
      WHERE g.guard_no = guard_no
        AND u.user_id = guard_id
        AND u.user_pwd = guard_password
        AND g.ward_no = ward_no
        AND g.guard_allowed = 'completed';

      -- ì˜ˆì•½ì´ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸
      SELECT COUNT(*) INTO appointment_exist
      FROM `appointment`
      WHERE appt_no = appt_no
        AND user_no = ward_no;
        
      IF guard_exist > 0 AND appointment_exist > 0 THEN
          -- appointment í…Œì´ë¸”ì—ì„œ í•´ë‹¹ ì˜ˆì•½ì— ëŒ€í•œ ë ˆì½”ë“œ ì‚­ì œ
          DELETE FROM `appointment`
          WHERE appt_no = appt_no
            AND user_no = ward_no
        AND appt_status = 'waiting';
      ELSE
          SIGNAL SQLSTATE '45000'
          SET MESSAGE_TEXT = 'Invalid guardian credentials or relationship, or appointment does not exist.';
      END IF;
  END //

  DELIMITER ;

  -- CALL ì˜ˆì‹œ
  CALL CancelAppointmentByGuardian(6, 'user06', 'password6', 1, 9);
  ```
![image](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/63641939/6a95345e-1384-4190-8a79-73f2577c678c)
![image](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/63641939/d7792eaf-1712-443a-88ac-2798f19acb34)
  </div>
  </details>
<details>
  <summary>ë³‘ì›ì´ ì§„ë£Œ ì˜ˆì•½ ê±°ì ˆ</summary>
  <div>
  
  * appointment í…Œì´ë¸”ì—ì„œ appt_statusê°€ rejectedë¡œ ë³€ê²½ë˜ë©´ rejection í…Œì´ë¸”ì— í•´ë‹¹ ê±°ì ˆ ë‚´ì—­ ì¶”ê°€ 
  ```sql

  DELIMITER $$

  CREATE TRIGGER after_appointment_update
  AFTER UPDATE ON appointment
  FOR EACH ROW
  BEGIN
      IF NEW.appt_status = 'rejected' AND OLD.appt_status = 'waiting' THEN
          INSERT INTO rejection (rejection_result, appt_no)
          VALUES ('Reservation cancelled by hospital', NEW.appt_no);
      END IF;
  END $$

  DELIMITER ;

  -- UPDATE ì˜ˆì‹œ 
  UPDATE appointment 
  SET appt_status = "rejected"
  WHERE appt_status = "waiting" AND hosp_no = 1 AND appt_no = 8;
  ```
![image](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/63641939/aebaa8a5-71e4-41bf-986d-733d37568828)
![image](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/63641939/74a4f2c3-4a01-4455-a3ea-76da633b66f5)
  </div>
  </details>

  ### 6. ì˜ˆì•½ ë³€ê²½
  <details>
  <summary>í™˜ì ë³¸ì¸ ì§„ë£Œ ì˜ˆì•½ ë³€ê²½</summary>
  <div>
   
  * ì˜ˆì•½ ë²ˆí˜¸, íšŒì› ì•„ì´ë””, ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ë©´ ì˜ˆì•½ ë³€ê²½ í—ˆìš©
  ```sql

  -- ì‚¬ìš©ìê°€ ìì‹ ì˜ ì˜ˆì•½ ì •ë³´ ë³€ê²½ 
  update appointment a
  inner join user u
  on u.user_no=a.user_no
  set a.appt_symptom = 'ì˜¤ëŠ˜ ì•„ì¹¨ê¹Œì§€ ì—´ì´ë‚¬ì–´ìš”'
  where  a.appt_no = 1 -- íŠ¹ì • ì˜ˆì•½ ì‹ë³„ê°’
          and u.user_id='user01'   -- ìœ ì € id
          and u.user_pwd='password1' -- ìœ ì € pwd
          and u.user_no=1     -- ìœ ì € ê³ ìœ ì‹ë³„ê°’
          and appt_status ='waiting'; -- ì˜ˆì•½ ìƒíƒœ
  ```
![image](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/63641939/78b09603-67f5-46b7-88ad-a32fb2b3b0d4)
![image](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/63641939/d930cb68-8763-4763-a3fa-0d6e1d120588)
  </div>
  </details>
  <details>
  <summary>ë³´í˜¸ìê°€ í”¼ë³´í˜¸ìì˜ ì§„ë£Œ ì˜ˆì•½ ë³€ê²½</summary>
  <div>
   
  * ë³´í˜¸ì ì•„ì´ë””, ë³´í˜¸ì ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥ë°›ê³  í•´ë‹¹ ì˜ˆì•½ ë‚´ì—­ì— ëŒ€í•´ ë³´í˜¸ì ê´€ê³„ê°€ ì„±ë¦½í•˜ë©´ ì˜ˆì•½ ë³€ê²½ í—ˆìš©
  ```sql

  update appointment
  set appt_symptom = 'ì˜¤ëŠ˜ ì•„ì¹¨ê¹Œì§€ ì—´ì´ë‚¬ì–´ìš”'
  where appt_status ='waiting' -- ì˜ˆì•½ ìƒíƒœ
        and appt_no=1  -- íŠ¹ì • ì˜ˆì•½ ì‹ë³„ê°’
        and user_no in (select ward_no    -- íŠ¹ì • ë³´í˜¸ìì˜ í”¼ë³´í˜¸ì ë¦¬ìŠ¤íŠ¸
                        from guardian g
                        join user u on g.guard_no=u.user_no
                        where u.user_id='user06'    -- ë³´í˜¸ì id
                              and user_pwd='password6' -- ë³´í˜¸ì pwd
                              and g.guard_allowed='completed') ; -- ì˜ˆì•½ ìƒíƒœ
  ```
![image](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/63641939/76814e3c-cf25-419e-98ee-22ba80e46bc6)
![image](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/63641939/cd5ca216-f597-41ec-baa1-99f9c97f6572)
  </div>
  </details>

  ### 7. ì˜ˆì•½ ìˆ˜ë½ / ê±°ì ˆ
  <details>
  <summary>ë³‘ì›ì´ ì˜ˆì•½ ìˆ˜ë½ / ê±°ì ˆ</summary>
  <div>
   
  * ì˜ˆì•½ ë²ˆí˜¸ë¥¼ ì…ë ¥ë°›ì•„ ìˆ˜ë½/ê±°ì ˆ ì—¬ë¶€ ê²°ì • 
  ```sql

  -- ì˜ˆì•½ ìƒíƒœ ë³€ê²½ í”„ë¡œì‹œì €
  DELIMITER $$
  CREATE PROCEDURE change_appointment_status (
      IN p_appt_no INT,
      IN p_status enum('rejected','accepted'),
      IN p_reason TEXT
  )
  BEGIN
      -- ì˜ˆì•½ ìƒíƒœ ì—…ë°ì´íŠ¸
      UPDATE appointment
      SET appt_status = p_status
      WHERE appt_no = p_appt_no;

      -- ê±°ì ˆì¸ ê²½ìš° ê±°ì ˆ ì‚¬ìœ  ì¶”ê°€
      IF p_status = 'rejected' THEN
          INSERT INTO rejection (rejection_result, appt_no)
          VALUES (p_reason, p_appt_no);
      END IF;
  END $$
  DELIMITER ;


  -- call ì˜ˆì‹œ
  call change_appointment_status(1,'accepted',NULL);

  call change_appointment_status(1,'rejected','ë‹´ë‹¹ì˜ì‚¬ê°€ ê°œì¸ì‚¬ì •ìœ¼ë¡œ ì˜¤ëŠ˜ íœ´ì§„í•©ë‹ˆë‹¤.');
  ```
![image](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/63641939/03e64a62-39a7-49b0-87ce-3a9fdd2ee2d4)
![image](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/63641939/c5e3be0f-a02b-420a-b181-bdbc154c494d)
![image](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/63641939/d920de2b-538b-4323-af2e-473d66f77fcc)
  </div>
  </details>

### 8. ì§„ë£Œê¸°ë¡
  <details>
  <summary>íšŒì›ì´ ì§„ë£Œ ê¸°ë¡ í™•ì¸</summary>
  <div>
   
  * íšŒì› ì•„ì´ë””, ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥ë°›ì•„ ì§„ë£Œ ê¸°ë¡ í™•ì¸ 
  ```sql

  select appt_date as 'ë°©ë¬¸ ë‚ ì§œ',
       u.user_name as 'ì‚¬ìš©ìëª…',
       h.hosp_name as 'ë³‘ì› ì´ë¦„',
       d.doctor_name as 'ì˜ì‚¬ ì´ë¦„',
       ifnull(appt_symptom,'ì—†ìŒ') as 'ì¦ìƒ',
       m.record_diagnosis as 'ì§„ë‹¨ ë‚´ìš©',
       m.record_treatment as 'ì²˜ë°© ë‚´ìš©'
  from user u
  left join appointment app on u.user_no=app.user_no
  join hospital h on app.hosp_no = h.hosp_no
  join doctor d on app.doctor_no=d.doctor_no
  join medical_record m on app.appt_no = m.appt_no
  where appt_status= 'complete' and u.user_id = 'user08' and u.user_pwd='password8';
  ```
![image](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/63641939/ec52be40-6351-4a59-8f24-f3cacf108119)
  </div>
  </details>
  <details>
  <summary>ë³‘ì›ì´ íšŒì›ì˜ ì§„ë£Œ ê¸°ë¡ ì €ì¥</summary>
  <div>
   
  * ë³‘ì›ì´ ì§„ë£Œê°€ ì™„ë£Œëœ ì§„ë£Œ ì •ë³´ ì €ì¥
  ```sql
  INSERT INTO medical_record(record_diagnosis, record_treatment, appt_no, hosp_no, user_no, docdept_no)
  VALUES('ìœ„ì—¼', 'ì•½ ì²˜ë°©', 8, 1, 6, 1);
  ```
![image](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/63641939/faf3383c-417a-4760-934c-06589b0e8c42)
  </div>
  </details>

### 9. ë³´í˜¸ì / í”¼ë³´í˜¸ì ì„¤ì • 
  <details>
  <summary>ë³´í˜¸ì ì‹ ì²­</summary>
  <div>
   
  * ë³´í˜¸ì íšŒì› ë²ˆí˜¸, í”¼ë³´í˜¸ì íšŒì› ë²ˆí˜¸, ê´€ê³„ë¥¼ ì…ë ¥ ë°›ì•„ ë³´í˜¸ì ì‹ ì²­ 
  ```sql

  INSERT INTO guardian(guard_no, ward_no, guard_relationship)
  VALUES(1, 2, 'ë¶€ëª¨');
  ```
![image](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/80452437/1468c121-3f4e-47db-851b-0e7c666a8294)

  </div>
  </details>
  <details>
  <summary>ë³´í˜¸ì ì‹ ì²­ ìˆ˜ë½</summary>
  <div>
   
  * ë³´í˜¸ì í—ˆê°€ ìƒíƒœë¥¼ completedë¡œ ë³€ê²½  
  ```sql

  UPDATE guardian
  SET guard_allowed = 'completed'
  WHERE guard_no = 1 AND ward_no = 2;
  ```
![image](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/80452437/c30a22c8-e574-4ab7-89a3-5152439a1623)

  </div>
  </details>
  <details>
  <summary>ë³´í˜¸ì ì‹ ì²­ ê±°ì ˆ</summary>
  <div>
   
  * ë³´í˜¸ì í—ˆê°€ ìƒíƒœë¥¼ rejectedë¡œ ë³€ê²½ 
  ```sql

  UPDATE guardian
  SET guard_allowed = 'rejected'
  WHERE guard_no = 1 AND ward_no = 2;
  ```
![image](https://github.com/beyond-sw-camp/be08-1st-primary-findoc/assets/80452437/a180ac2c-4544-4511-be43-4c53be77f655)

  </div>
  </details>
  
---

## ğŸ‘« CO-OP
### íšŒê³ 
|íŒ€ì›|íšŒê³ ë¡|
|-----|-----|
|ê¹€ë„í•˜|ë°°ì› ë˜ ë‚´ìš©ì„ í”„ë¡œì íŠ¸ë¥¼ í†µí•´ êµ¬í˜„í•´ ë³¼ ìˆ˜ ìˆì–´ì„œ ë§¤ìš° ì¢‹ì€ ê²½í—˜ì´ ë˜ì—ˆìŠµë‹ˆë‹¤. íŒ€ì›ë“¤ì´ ê°ìì˜ ì—­í• ì„ ì˜ ìˆ˜í–‰í•˜ê³  ë§ì€ íšŒì˜ë¥¼ í†µí•´ ì„œë¡œì˜ ì˜ê²¬ì„ ê³µìœ í•˜ë©´ì„œ ì›í•˜ëŠ” ë°©í–¥ì˜ ê²°ê³¼ë¬¼ì„ ë‚¼ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ë‹¹ë¶„ê°„ ë‹¤ë¥¸ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ ë‹¤ë¥¸ íŒ€ì›ì„ ë§Œë‚˜ê³  ë‹¤ë¥¸ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ê²Œ ë  í…ë° ì²« í”„ë¡œì íŠ¸ë¥¼ ì˜ ë§ˆë¬´ë¦¬í•˜ê²Œ ë˜ì–´ ì•ìœ¼ë¡œì˜ í”„ë¡œì íŠ¸ë“¤ë„ ë§ì´ ê¸°ëŒ€ê°€ ë©ë‹ˆë‹¤.|
|ê¹€ì€ê²½|DBë¡œë§Œ í”„ë¡œì íŠ¸ë¥¼ í•œë‹¤ëŠ” ê²ƒì— ì‰½ê²Œ ìƒê°í–ˆì—ˆì§€ë§Œ, ì£¼ì œ ì„ ì •ë¶€í„° í…Œì´ë¸” ì„¤ê³„ì™€ ì—°ê´€ê´€ê³„ ì„¤ì •ê¹Œì§€ ê³ ë¯¼í•  ë¶€ë¶„ì´ ë§ì•˜ìŠµë‹ˆë‹¤. dbì— ì´ˆì ì„ ë§ì¶°ì„œ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•  ìˆ˜ ìˆì–´ì„œ ë‹¤ì–‘í•œ SQL ì§ˆì˜ë¬¸ì„ ì ìš©í•´ ë³¼ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. íŠ¹íˆ ì´ë²ˆ í”„ë¡œì íŠ¸ë¥¼ í†µí•´ì„œ DB ìì²´ì—ì„œ ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ êµ¬í˜„í•´ ë³¼ ìˆ˜ ìˆì—ˆê³  DB ë‹¨ì—ì„œ ì„±ëŠ¥ì„ í–¥ìƒí•  ìˆ˜ ìˆëŠ” ë¶€ë¶„ì´ ë¬´ì—‡ì¸ì§€ì— ëŒ€í•´ì„œ ê³ ë¯¼í•  ìˆ˜ ìˆëŠ” ì‹œê°„ì„ ê°€ì§ˆ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.|
|ì´ì§€ì •|íŒ€í”„ë¡œì íŠ¸ë„ ì²˜ìŒì´ì—ˆê³  ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•´ ì•„ëŠ” ê²ƒì´ ë§ì´ ì—†ëŠ”ë° ì²˜ìŒë¶€í„° ëê¹Œì§€ ì„¤ê³„ë¥¼ í•´ì•¼ëœë‹¤ëŠ” ì ì—ì„œ ê±±ì •ì´ ë§ì•˜ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì´ë²ˆ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ ì¡°ê¸ˆì´ë¼ë„ ë” ì°¸ì—¬í•´ ë°°ì›Œê°€ëŠ” ë¶€ë¶„ì´ ë§ì•˜ìœ¼ë©´ ì¢‹ê² ë‹¤ê³  ìƒê°í–ˆëŠ”ë°, íŒ€ì›ë“¤ì´ ì˜ ì´ëŒì–´ì¤€ ë•ë¶„ì— í”„ë¡œì íŠ¸ë¥¼ í†µí•´ì„œ ë§ì€ ê²ƒì„ ë°°ì›Œê°€ëŠ” ì‹œê°„ì´ ë˜ì—ˆë˜ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì´ë²ˆ ê²½í—˜ìœ¼ë¡œ íŒ€ í”„ë¡œì íŠ¸ì— ëŒ€í•´ ëŠë‚€ ê²ƒì´ ë§ê³  ë‹¤ìŒì—ëŠ” ë” ì˜í•˜ê³  ì‹¶ë‹¤ëŠ” ìš•ì‹¬ì´ ìƒê²¼ìŠµë‹ˆë‹¤. |
|í™©ì§€ìš°|ì„œë¹„ìŠ¤ ì•„ì´ë””ì–´ë¥¼ êµ¬ìƒí•˜ê³  Maria DB, SQLì„ í™œìš©í•´ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ êµ¬ì¶•í•˜ëŠ” í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í–ˆìŠµë‹ˆë‹¤. ê¸°ì¡´ì—ëŠ” SQL ë¬¸ë²•ì„ ë³µìŠµí•˜ê³  ë‹¨ìˆœí•œ ì¿¼ë¦¬ë¥¼ ì‘ì„±í•´ë³´ì•˜ëŠ”ë°, í”„ë¡œì íŠ¸ì—ì„œëŠ” ì„œë¹„ìŠ¤ì˜ ê¸°ëŠ¥ê¹Œì§€ ê³ ë ¤í•´ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì„¤ê³„í•˜ê³  ì¿¼ë¦¬ë¬¸ì„ êµ¬í˜„í•´ë³´ì•˜ìŠµë‹ˆë‹¤. ì˜ˆì•½ì´ë‚˜ ì·¨ì†Œ ê¸°ëŠ¥ì„ êµ¬í˜„í•  ë•Œ í”„ë¡œì‹œì €ë‚˜ íŠ¸ë¦¬ê±°ë¥¼ í™œìš©í•˜ëŠ” ë“± SQLì˜ ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ë°ì´í„°ì— ì ìš©í•´ ë³¼ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ë˜í•œ í˜¼ìì„œ DBë¥¼ êµ¬í˜„í•˜ê³  í…ŒìŠ¤íŠ¸í–ˆì„ ë•Œë³´ë‹¤ ë” ë‹¤ì–‘í•œ ê²½í—˜ì„ í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. íŠ¹íˆ ìš”êµ¬ì‚¬í•­ ëª…ì„¸ì™€ í…Œì´ë¸”ì„ ì‘ì„±í•  ë•Œ ì„œë¡œ ìƒê°í•˜ëŠ” ë°©í–¥ì´ ë‹¤ë¥¼ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì´ ì¤‘ìš”í•˜ë‹¤ê³  ìƒê°í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ë¶€ì¡±í•œ ë¶€ë¶„ì´ ë§ì•˜ëŠ”ë° íŒ€ì›ë¶„ë“¤ ë•ë¶„ì— í”„ë¡œì íŠ¸ë¥¼ ì˜ ë§ˆë¬´ë¦¬ í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.|
